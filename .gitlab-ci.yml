image: jangrewe/gitlab-ci-android
before_script:
  - export GRADLE_USER_HOME=$(pwd)/.gradle
  - chmod +x ./gradlew
stages:
  - build
  - test
cache:
  key: ${CI_PROJECT_ID}
  paths:
    - .gradle/

lintDebug:
  stage: build
  script:
    - ./gradlew -Pci --console=plain :app:lintDebug -PbuildDir=lint --build-cache --configure-on-demand
assembleDebug:
  stage: build
  script:
    - ./gradlew assembleDebug --build-cache --configure-on-demand
unitTest:
  stage: test
  script:
    - ./gradlew -Pci --console=plain :app:testDebug --build-cache --configure-on-demand